---
import Layout from "~/layouts/PageLayout.astro";
import { SITE, getLanguageFromPath } from "~/config.mjs";
import Datatable from "@dbs/datatables";
import { Banner,i18n } from "@dbs/ui";

const biblesResponse = await fetch(`${SITE.apiUrl}/bibles.json`);
let bibles = await biblesResponse.json();
const locale = getLanguageFromPath(Astro.url);
const t = i18n[locale]

const scope = import.meta.env.COUNTRY_SCOPE
if(scope !== 'all') {
  bibles = bibles.filter(bible => {return bible.country_id == scope})
}
---

<Layout meta={{ title: t.bibles }}>
  <Banner
    background="banner_bibles"
    title={t['bibles']}
  />

  <Datatable inputData={bibles} locale={locale} t={t} tableType="bibles" client:visible />
</Layout>
