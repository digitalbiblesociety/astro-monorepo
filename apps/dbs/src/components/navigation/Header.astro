---

import CartButton from "./Header/CartButton.svelte"
import LanguageSwitcher from "./Header/LanguageSwitcher.astro"

import Menu from './Header/Menu.astro'
import MenuMobile from "./Header/MenuMobile.astro"

import { Icon } from 'astro-icon'
import Search from "../partials/Search.svelte"
import Logo from "./Logo.astro"

// import DesktopMenu from "./Partials/MenuDesktop.svelte"


import { getLanguageFromPath } from "~/config.mjs";
import {i18n} from "~/translations/i18n.mjs";
const locale = getLanguageFromPath(Astro.url);
const t = i18n[locale]


let pages = [
	{
		title: t["Bibles"],
		href: `/${locale}/bibles`,
		heading: t["bibles_title"],
		//head_icon: IconLibrary,
		nested: [
			{
				title: t["Bibles Online"],
				long: t["bibles_long_cloud"],
				href: `/${locale}/bibles`,
				icon: 'cloud-download',
				class: "text-white bg-slate-500 border",
			},
			{
				title: t["bibles_listen"],
				long: t["bibles_long_listen"],
				href: `/${locale}#`,
				icon: "play",
				class: "text-white bg-purple-600 border",
			},
			{
				title: t["bibles_players"],
				long: t["bibles_long_players"],
				href: `/${locale}/bibles/audio/pearls`,
				icon: 'volume-up',
				class: "text-white bg-cyan-600 border",
			},
			{
				title: t["bibles_inscript"],
				long: t["bibles_long_inscript"],
				href: `/${locale}https://inscript.org/`,
				icon: 'bookmark-alt',
				class: "text-white bg-primary-400 border",
				target: "_blank",
			},
			{
				title: t["Bibles in Print"],
				long: t["bibles_long_print"],
				href: `/${locale}/bibles/print`,
				icon: 'book-open',
				class: "text-white bg-yellow-500 border",
			},
		],
		floor: [
			{
				title: t["Find a Bible"],
				long: "",
				href: `/${locale}http://find.bible/`,
				icon: 'search',
				class: "text-white bg-teal-400 border-teal-600",
				tag: "Find.Bible",
				target: "_blank",
			},
			{
				title: t["bibles_watch"],
				long: "",
				href: `/${locale}/about/work/research`,
				icon: 'globe',
				class: "text-white bg-red-400 border-red-600",
				tag: "Coming Soon",
			},
		],
	},
	{ title: t["Libraries"], href: `/${locale}/libraries/treasures/`},
	{
		title: t["About"],
		href: `/${locale}/about`,
		heading: t["about_title"],
		//head_icon: "information-circle",
		nested: [
			{
				title: t["about_ministry"],
				long: t["about_long_ministry"],
				href: `/${locale}/about/overview`,
				icon: 'user-group',
				class: "text-white bg-primary-400 border border-teal-500",
			},
			{
				title: t["Donate"],
				long: t["about_long_donate"],
				href: `/${locale}/about/donate`,
				icon: 'heart',
				class: "text-white bg-red-500 border border-red-700",
			},

			{
				title: t["about_projects"],
				long: t["about_long_projects"],
				href: `/${locale}/about/work/biblecloud`,
				icon: 'map',
				class: "text-white bg-sky-800 border",
			},

			{
				title: t["about_news"],
				long: t["about_long_news"],
				href: `/${locale}/about/projects`,
				icon: 'newspaper',
				class: "text-white bg-emerald-500 border border-slate-400",
			},
			{
				title: t["about_community"],
				long: t["about_long_community"],
				href: `/${locale}/about/community`,
				icon: 'users',
				class: "text-white bg-indigo-400",
			},
			{
				title: t["Project Proposals"],
				long: t["about_long_proposals"],
				href: `/${locale}/about/projects/proposals`,
				icon: 'globe',
				class: "text-white bg-amber-500",
			},
		],
		floor: [
			{
				title: t["about_videos"],
				href: `/${locale}https://vimeo.com/549313705`,
				//icon: "video-camera",
				class: "text-white bg-sky-300 border border-sky-500",
				tag: "Vimeo",
				target: "_blank",
			},
			{
				title: t["Github"],
				long: "",
				href: "https://github.com/digitalbiblesociety",
				//icon: "cog",
				class:
					"text-slate-500 dark:text-gray-200 bg-slate-200 dark:bg-slate-600 border border-slate-400",
				tag: "Repo",
				target: "_blank",
			},
			{
				title: t["about_contact"],
				long: "",
				href: `/${locale}/about/contact`,
				//icon: "mail",
				class: "text-white bg-gray-400 border border-gray-500",
				tag: t["Connecting"],
				target: "",
			},
		],
	},
	{ title: t["Store"], href: `/${locale}/store`},
	{ title: t["Donate"], href: `/${locale}/about/donate/`},
]
---

<header class="bg-primary-900 pb-32 bg-[url('/img/bg-linen.png')] bg-blend-lighten dark:bg-black dark:bg-none">
	<div class="mx-auto max-w-7xl px-4 md:divide-y md:divide-gray-500 dark:md:divide-gray-800">
		<div class="relative flex h-16 justify-between">
			<Logo />
			<Search client:idle />
			<div class="relative z-10 flex items-center justify-between">
				<LanguageSwitcher />
				<CartButton client:visible />
			</div>
		</div>
		<nav class="mt-1 justify-center pb-0 md:flex md:space-x-8 md:pt-1">
			{pages.map(page => <Menu {page} />)}
		</nav>
	</div>

	<MenuMobile />
</header>
