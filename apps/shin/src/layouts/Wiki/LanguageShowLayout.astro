---
import Layout from "~/layouts/PageLayout.astro";
import { SITE, getLanguageFromPath } from "~/config.mjs";
import LanguageShow from "~/components/partials/LanguageShow.svelte";
export async function getStaticPaths() {
  const data = await fetch(`${SITE.apiUrl}/languages.json`).then((response) =>
    response.json()
  );

  return data.map((language) => {
    return {
      params: { iso: language.id },
    };
  });
}

const { iso } = Astro.params;
const languageResponse = await fetch(`${SITE.apiUrl}/languages/${iso}.json`);
const language = await languageResponse.json();
const locale = getLanguageFromPath(Astro.url);
---

<Layout>

  <LanguageShow language={language} locale={locale} client:only />

</Layout>
